<section>
<div data-ng-if="!analysisId" data-ng-controller="NewAnalysisController as NAC" class="analysis">
    <div
        class="analysis-tool-selection"
        ng-class="{
            'condensed': NAC.shouldShowSetSelection,
            'elevated': NAC.shouldElevateToolSelection,
        }"
    >
        <div
            ng-repeat="(analysisType, analysis) in NAC.analysesMeta"
            class="analysis-tool analysis-tool--{{analysis.type}}"
            ng-class="{
                'analysis-tool--selected': analysis === NAC.selectedAnalysis,
            }"
        >
            <div
                class="condensed-hitarea"
                ng-mouseover="NAC.shouldElevateToolSelection = true"
                ng-mouseleave="NAC.shouldElevateToolSelection = false"
                ng-click="NAC.shouldElevateToolSelection = false; NAC.handleClickAnalysis(analysis);"
            ></div>
            <div
                class="analysis-tool__image-wrapper"
                ng-if="analysis.image"
                ng-bind-html="analysis.image | to_trusted"
            ></div>
            <div class="analysis-tool__column--text">
                <h2 class="analysis-tool__heading">
                    {{analysis.strings.name}}
                    <a
                        class="demo"
                        ng-click="analysis.launchDemo(); $event.stopPropagation(); $event.preventDefault();"
                        tooltip="{{analysis.strings.demoDescription}}"
                        href="#"
                    > (demo) </a>
                </h2>
                <p class="analysis-tool__description">
                    {{analysis.strings.description}}
                </p>
                <div>
                    <button
                        class="btn btn-primary select-btn"
                        ng-click="NAC.handleClickAnalysis(analysis); NAC.shouldShowSetSelection = true;"
                    >
                        Select
                    </button>
                </div>
            </div>
        </div>


        <a
            class="analysis-tool analysis-tool--suggestions"
            href="mailto:dcc-support@icgc.org?Subject=Data%20Portal%20Feedback"
        >
            <div class="analysis-tool__image-wrapper">
                <img style="width: 48%;" src="/styles/images/lightbulb-illustration.svg">
            </div>
            <div class="analysis-tool__column--text">
                <h2 class="analysis-tool__heading" >More?</h2>
                <p class="analysis-tool__description">
                    <translate>Do you have a specific type of analysis you want to see?</translate>
                    <br/>
                    <translate>Leave feedback and let us know.</translate>
                </p>
            </div>
        </a>
    </div>
    <div
        class="sets-container"
        ng-class="{'should-show': NAC.shouldShowSetSelection}"
    >
        <i
            ng-click="NAC.shouldShowSetSelection = false;"
            class="fa fa-close close-btn"
        ></i>
        <div
            class="set-selection-wrapper"
        >
            <div style="font-size:1.25rem">
                <small style="display: block; margin-bottom: -0.2em; color: #666;">
                    <translate>Select {{NAC.selectedAnalysis.type === 'enrichment' ? 'set' : 'sets'}} for
                </small> 
                <div>
                    <strong style="font-size: 22px; color: #333;">{{NAC.selectedAnalysis.strings.name}}</strong></translate>
                    <small>
                        <a
                            class="demo"
                            ng-click="NAC.selectedAnalysis.launchDemo()"
                            tooltip="{{analysis.strings.demoDescription}}"
                            href="#"
                        > (demo) </a>
                    </small>
                </div>
            </div>
            <set-selection
                sets="NAC.allSets"
                description="NAC.selectedAnalysis.strings.description"
                selection-instructions="NAC.selectedAnalysis.strings.datasetSelectionInstructions"
                is-launching-analysis="NAC.isLaunchingAnalysis()"
                set-compatibility-criteria="NAC.selectedAnalysis.setCompatibilityCriteria"
                analysis-satisfaction-criteria="NAC.selectedAnalysis.analysisSatisfactionCriteria"
                on-click-launch="NAC.selectedAnalysis.launch"
                on-click-launch-demo="NAC.selectedAnalysis.launchDemo"
                on-selected-sets-change="NAC.handleSelectedSetsChange"
            ></set-selection>
        </div>
    </div>
</div>
</section>