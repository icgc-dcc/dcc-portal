<div class="modal-content download-manifests">
    <div class="modal-header clearfix">
      <h3 class="pull-left">Download manifests</h3>
      <button class="pull-right t_button" data-ng-click="cancel()"><i
              class="icon-cancel"></i>
      </button>
    </div>

    <div class="modal-body">
       A manifest is a text file passed to download clients in order to download files.
       You will get a single manifest file per repository. Please note that some files may be stored in multiple repositories.
       The list below is restricted by your repository filter.
       <br>
       <table class="table table-info">
         <thead>
           <th style="width: 40%;">Repository</th>
           <th class="text-right"># Donors</th>
           <th class="text-right"># Files</th>
           <th class="text-right">Total file size</th>
           <th class="text-right">
           </th>
         </thead>

         <tbody>
            <tr
              data-ng-repeat-start="(repoName, repoData) in repos"
              data-ng-class="{
                alt: $index % 2 === 0
              }"
            >
             <td>
                {{ repoName }}
             </td>
             <td class="text-right">{{ repoData.donorCount | number }}</td>
             <td class="text-right">{{ repoData.fileCount | number }}</td>
             <td class="text-right">{{ repoData.fileSize | bytes }}</td>
             <td class="text-right">
                <div class="btn-group">
                  <button
                    type="button"
                    class="btn btn-xs btn-default"
                  >
                    <i class="icon-download"></i>
                  </button>

                  <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                  </button>

                  <ul class="dropdown-menu">
                    <li>
                      <a ng-click="getRepoManifestShortUrl(repoData)"
                      >
                        Manifest URL
                      </a>
                    </li>
                    <li ng-if="repoData.hasManifest">
                      <a
                        ng-class="{
                          disabled: repoData.manifestID || repoData.isGeneratingManifestID
                        }"
                        data-ng-click="
                          !repoData.manifestID &&
                          !repoData.isGeneratingManifestID &&
                          createManifestId(repoName, repoData)"
                      >
                        Manifest ID
                      </a>
                      <popover
                        popover-anchor-label=""
                        popover-assist-icon-class="icon-help"
                        popover-assist-icon-position-before="false"
                      >

                          In addition to the manifest file, the ICGC Storage Client accepts manifest ID to download files selected in your query.
                          Please see the <a href="http://docs.icgc.org/cloud/guide/#manifest-from-the-data-portal" target="_blank"><i class="icon-external-link"></i>User Guide</a> to learn more.
                          </a>
                      </popover>
                    </li>
                  </ul>
                </div>
             </td>
           </tr>

            <tr class="extra" data-ng-repeat-end data-ng-if="
              repoData.isGeneratingManifestID ||
              repoData.isGeneratingManifestShortUrl ||
              repoData.manifestID ||
              repoData.shortUrl"
            >
              <td colspan="5" class="text-right">
                <div data-ng-if="repoData.isGeneratingManifestShortUrl || repoData.isGeneratingManifestID">
                  <i class="icon-spinner icon-spin"></i>
                </div>

                <div class="manifest" data-ng-if="repoData.hasManifest">
                  <div data-ng-if="repoData.manifestID">
                    <div data-copy-to-clip data-copy-data="repoData.manifestID"
                      data-show-copy-tips="true" data-prompt-on-copy="true"
                      data-on-copy-success-message="Manifest ID copied!"
                      data-on-copy-focus-on="input[type='text']">
                      <input size="38" type="text" class="input_manifest" value="{{repoData.manifestID}}"/>
                    </div>
                  </div>
                </div>

                <div
                  data-ng-if="repoData.shortUrl"
                >
                  <div>
                    <div data-copy-to-clip data-copy-data="repoData.shortUrl"
                      data-show-copy-tips="true" data-prompt-on-copy="true"
                      data-on-copy-success-message="Short URL copied!"
                      data-on-copy-focus-on="input[type='text']">
                      <input size="38" type="text" class="input_manifest" value="{{repoData.shortUrl}}"/>
                    </div>
                  </div>
                </div>

             </td>
           </tr>
         </tbody>
       </table>
    </div>

    <div class="modal-footer">
      <button class="t_button" data-ng-click="cancel();">Cancel</button>
      <button class="t_button" data-ng-click="download()"><i class="icon-download"></i>Download All</button>
    </div>
</div>
